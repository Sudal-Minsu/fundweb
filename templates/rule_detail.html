<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>{{ rule.name }} - ìƒì„¸ë³´ê¸°</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        canvas { margin: 40px 0; }
    </style>
</head>
<body>
    <h1>{{ rule.name }} ìƒì„¸ ì •ë³´</h1>
    <p><strong>ì´ ìˆ˜ìµê¸ˆ:</strong> {{ rule.profit }} ì›</p>
    <p><strong>í‰ê·  ìˆ˜ìµë¥ :</strong> {{ rule.yield }} %</p>

    {% if profit_data %}
        <h2>ğŸ“ˆ ìˆ˜ìµê¸ˆ ì¶”ì´</h2>
        <canvas id="profitChart"></canvas>

        <h2>ğŸ“‰ ìˆ˜ìµë¥  ì¶”ì´</h2>
        <canvas id="yieldChart"></canvas>

        <script>
            const labels = {{ labels|tojson }};
            const profitData = {{ profit_data|tojson }};
            const yieldData = {{ yield_data|tojson }};

            const profitCtx = document.getElementById('profitChart').getContext('2d');
            new Chart(profitCtx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'ìˆ˜ìµê¸ˆ (â‚©)',
                        data: profitData,
                        borderColor: 'blue',
                        backgroundColor: 'rgba(0, 0, 255, 0.1)',
                        fill: true,
                        tension: 0.3
                    }]
                }
            });

            const yieldCtx = document.getElementById('yieldChart').getContext('2d');
            new Chart(yieldCtx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'ìˆ˜ìµë¥  (%)',
                        data: yieldData,
                        borderColor: 'red',
                        backgroundColor: 'rgba(255, 0, 0, 0.1)',
                        fill: true,
                        tension: 0.3
                    }]
                }
            });
        </script>
    {% else %}
        <p>ğŸ“‰ ìˆ˜ìµ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}

    <p><a href="/">â† ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a></p>
</body>
</html>
